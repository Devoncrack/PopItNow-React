{"version":3,"sources":["components/TimeDisplay.tsx","components/Timer.tsx","components/Bubble.tsx","components/BubbleTable.tsx","components/SourceCodeLink.tsx","components/BottomNav.tsx","components/TimesManager.tsx","components/Title.tsx","App.tsx","index.tsx"],"names":["zeroPad","value","digits","padded","toString","length","TimeDisplay","time","prefix","classes","stringTime","minutes","seconds","milliseconds","className","defaultProps","undefined","Timer","initialTime","sendFinal","useState","duration","currentTime","setCurrentTime","mostRecentTime","useRef","useEffect","timer","setInterval","Date","getTime","valueOf","Math","floor","current","clearInterval","images","src","alt","Bubble","row","col","onPress","handlePress","events","window","touch","mousedown","role","onMouseDown","onTouchStart","width","copyGrid","grid","newGrid","map","push","initialGrid","inner","j","i","createInitialGrid","BubbleTable","requestGameEnd","requestGameStart","Grid","setGrid","gaming","useContext","TimerContext","doToggle","every","el","gridIsClear","val","uniqueId","SourceCodeLink","LOGO_LINK","process","href","BottomNav","bestTime","attempts","createContext","TimesManager","times","setTimes","setBestTime","setAttempts","setGaming","addTime","checkBestTime","Provider","timerDisplayClasses","renderTimer","Title","App","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.54355bd6.chunk.js","sourcesContent":["// eslint-disable-next-line\nimport * as React from 'react'\r\nimport { Time } from './TimesManager'\n\nexport type DisplayTime = Pick<Time, 'minutes' | 'seconds' | 'milliseconds'>\n\ninterface TimeDisplayProps {\n    time: DisplayTime,\n    prefix?: string,\n    classes?: string,\n}\n\ninterface StringTime {\n    minutes: string,\n    seconds: string,\n    milliseconds: string,\n}\n\nconst zeroPad = (value: number, digits: number): string => {\n  const stringVal = value.toString()\n  let padded = stringVal\n  while (padded.length < digits) {\n    padded = `0${padded}`\n  }\n  return padded\n}\n\nconst TimeDisplay: React.FunctionComponent<TimeDisplayProps> = ({ time, prefix, classes }) => {\n  const stringTime: StringTime = {\n    minutes: zeroPad(time.minutes, 2),\n    seconds: zeroPad(time.seconds, 2),\n    milliseconds: zeroPad(time.milliseconds, 3),\n  }\n\n  return (\n    <p className={classes ? `${classes} time` : 'time'}>\n      {prefix}\n      {stringTime.minutes}\n      :\n      {stringTime.seconds}\n      .\n      {stringTime.milliseconds}\n    </p>\n  )\n}\n\nTimeDisplay.defaultProps = {\n  prefix: undefined,\n  classes: undefined,\n}\n\nexport default TimeDisplay\n","// eslint-disable-next-line\nimport * as React from 'react'\r\nimport { useState, useEffect, useRef } from 'react'\nimport TimeDisplay from './TimeDisplay'\nimport { Time } from './TimesManager'\n\ninterface TimerProps {\n    initialTime: number,\n    sendFinal: (arg: Time) => void,\n}\n\nconst Timer: React.FunctionComponent<TimerProps> = ({ initialTime, sendFinal }) => {\n  const [currentTime, setCurrentTime] = useState<Time>({ minutes: 0, seconds: 0, milliseconds: 0, duration: 0 })\n  const mostRecentTime = useRef({ minutes: 0, seconds: 0, milliseconds: 0, duration: 0 })\n\n  useEffect(() => {\n    const timer = setInterval(() => {\n      const time: Time = {\n        minutes: 0,\n        seconds: 0,\n        milliseconds: 0,\n        duration: 0,\n      }\n\n      let duration = new Date().getTime() - initialTime\n      time.duration = duration.valueOf()\n\n      time.minutes = Math.floor(duration / (1000 * 60))\n      duration %= (1000 * 60)\n\n      time.seconds = Math.floor(duration / 1000)\n      duration %= 1000\n\n      time.milliseconds = duration\n\n      setCurrentTime(time)\n      mostRecentTime.current = time\n    }, 10)\n    return () => {\n      clearInterval(timer)\n      sendFinal(mostRecentTime.current)\n    }\n  }, [initialTime, sendFinal])\n\n  return (<TimeDisplay time={currentTime} classes=\"bold-larger\" />)\n}\n\nexport default Timer\n","// eslint-disable-next-line\r\nimport * as React from 'react'\r\n\r\nexport interface BubbleProps {\r\n    value: boolean,\r\n    row: number,\r\n    col: number,\r\n    onPress: (i: number, j: number) => void,\r\n}\r\n\r\ninterface InteractionEvents {\r\n    touch: undefined | (() => void),\r\n    mousedown: undefined | (() => void),\r\n}\r\n\r\ninterface ImageData {\r\n    readonly src: string,\r\n    readonly alt: string,\r\n}\r\n\r\ninterface Images {\r\n    readonly pressed: ImageData,\r\n    readonly unpressed: ImageData\r\n}\r\n\r\nconst images: Images = {\r\n  unpressed: {\r\n    src: 'https://upload.wikimedia.org/wikipedia/commons/3/3f/Button_Icon_Blue.svg',\r\n    alt: 'blue button',\r\n  },\r\n  pressed: {\r\n    src: 'https://upload.wikimedia.org/wikipedia/commons/9/96/Button_Icon_White.svg',\r\n    alt: 'white button',\r\n  },\r\n}\r\n\r\nconst Bubble: React.FunctionComponent<BubbleProps> = ({ value, row, col, onPress }) => {\r\n  const handlePress = () => {\r\n    onPress(row, col)\r\n  }\r\n\r\n  const interactionEvent = (): InteractionEvents => {\r\n    if ('ontouchstart' in window) { return { touch: handlePress, mousedown: undefined } }\r\n    return { touch: undefined, mousedown: handlePress }\r\n  }\r\n\r\n  const getAlt = () => (value ? images.unpressed.alt : images.pressed.alt)\r\n\r\n  const getSrc = () => (value ? images.unpressed.src : images.pressed.src)\r\n\r\n  const events = interactionEvent()\r\n\r\n  return (\r\n    <div role=\"none\" onMouseDown={events.mousedown} onTouchStart={events.touch}>\r\n      <img width=\"32\" alt={getAlt()} src={getSrc()} />\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Bubble\r\n","// eslint-disable-next-line\r\nimport * as React from 'react'\r\nimport { useState, useContext } from 'react'\r\nimport { uniqueId } from 'lodash'\r\nimport Bubble from './Bubble'\r\nimport { TimerContext } from './TimesManager'\r\n\r\nexport interface BubbleTableProps {\r\n    requestGameEnd: () => void,\r\n    requestGameStart: () => void,\r\n}\r\n\r\nconst ROWS = 5\r\nconst COLUMNS = 6\r\n\r\nconst createInitialGrid = (row: number, col: number): boolean[][] => {\r\n  const inner: boolean[] = []\r\n  const grid: boolean[][] = []\r\n  for (let j = 0; j < col; j++) {\r\n    inner[j] = true\r\n  }\r\n  for (let i = 0; i < row; i++) {\r\n    grid[i] = [...inner]\r\n  }\r\n  return grid\r\n}\r\n\r\nconst copyGrid = (grid: boolean[][]): boolean[][] => {\r\n  const newGrid: boolean[][] = []\r\n  grid.map((row) => newGrid.push([...row]))\r\n  return newGrid\r\n}\r\n\r\nconst initialGrid: boolean[][] = createInitialGrid(ROWS, COLUMNS)\r\n\r\nconst BubbleTable: React.FunctionComponent<BubbleTableProps> = ({ requestGameEnd, requestGameStart }) => {\r\n  const [Grid, setGrid] = useState<boolean[][]>(copyGrid(initialGrid))\r\n  const gaming = useContext(TimerContext)\r\n\r\n  const gridIsClear = (grid: boolean[][]): boolean => grid.every((row) => row.every((el) => !el))\r\n\r\n  const doToggle = (i: number, j: number) => {\r\n    const grid = copyGrid(Grid)\r\n    grid[i][j] = !grid[i][j]\r\n    if (gaming) {\r\n      if (gridIsClear(grid)) {\r\n        requestGameEnd()\r\n        return setGrid(copyGrid(initialGrid))\r\n      }\r\n    } else {\r\n      requestGameStart()\r\n    }\r\n    return setGrid(grid)\r\n  }\r\n\r\n  return (\r\n    <table className=\"centered\">\r\n      <tbody>\r\n        { Grid.map((row, i) => (\r\n          <tr key={uniqueId()}>\r\n            {row.map((val, j) => (\r\n              <td key={uniqueId()}>\r\n                <Bubble value={val} row={i} col={j} onPress={doToggle} />\r\n              </td>\r\n            ))}\r\n          </tr>\r\n        ))}\r\n      </tbody>\r\n    </table>\r\n  )\r\n}\r\n\r\nexport default BubbleTable\r\n","// eslint-disable-next-line\nimport * as React from 'react'\r\n\ninterface SourceCodeProps {\n\n}\n\nconst SourceCodeLink: React.FunctionComponent<SourceCodeProps> = () => {\n  const GITHUB_LINK = 'https://github.com/g-parki/PopItNow-React'\n  const LOGO_LINK = `${process.env.PUBLIC_URL}/GitHub-Mark-120px-plus.png`\n  return (<a href={GITHUB_LINK}><img className=\"logo\" src={LOGO_LINK} alt=\"GitHub logo\" /></a>)\n}\n\nexport default SourceCodeLink\n","// eslint-disable-next-line\nimport * as React from 'react'\r\nimport SourceCodeLink from './SourceCodeLink'\nimport { Time } from './TimesManager'\nimport TimeDisplay from './TimeDisplay'\n\ninterface BottomNavProps {\n    attempts: number;\n    bestTime?: Time;\n}\n\nconst BottomNav: React.FunctionComponent<BottomNavProps> = ({ bestTime, attempts }) => (\n  <div className=\"nav-bottom\">\n    <div className=\"nav-member\">\n      <SourceCodeLink />\n    </div>\n    <div className=\"nav-member align-left time bold-larger\">\n      <p>\n        Attempts:\n        {attempts}\n      </p>\n    </div>\n    <div className=\"nav-member align-left time bold-larger\">\n      {bestTime ? <TimeDisplay prefix=\"Best: \" time={bestTime} classes=\"no-margin\" /> : null}\n    </div>\n  </div>\n)\n\nBottomNav.defaultProps = { bestTime: undefined }\n\nexport default BottomNav\n","// eslint-disable-next-line\r\nimport * as React from 'react'\r\nimport { useState, createContext } from 'react'\r\nimport Timer from './Timer'\r\nimport BubbleTable from './BubbleTable'\r\nimport BottomNav from './BottomNav'\r\nimport TimeDisplay from './TimeDisplay'\r\n\r\ninterface TimesManagerProps {\r\n\r\n}\r\n\r\nexport interface Time {\r\n    minutes: number,\r\n    seconds: number,\r\n    milliseconds: number,\r\n    duration: number,\r\n}\r\n\r\nexport const TimerContext = createContext(false)\r\n\r\nconst TimesManager: React.FunctionComponent<TimesManagerProps> = () => {\r\n  const [times, setTimes] = useState<Time[]>([])\r\n  const [bestTime, setBestTime] = useState<Time>()\r\n  const [attempts, setAttempts] = useState(0)\r\n  const [gaming, setGaming] = useState(false)\r\n\r\n  const startGame = () => {\r\n    setGaming(true)\r\n  }\r\n\r\n  const endGame = () => {\r\n    setGaming(false)\r\n    setAttempts(attempts + 1)\r\n  }\r\n\r\n  const checkBestTime = (time: Time) => {\r\n    if (bestTime === undefined || (time.duration < bestTime.duration)) {\r\n      setBestTime(time)\r\n    }\r\n  }\r\n\r\n  const addTime = (time: Time) => {\r\n    setTimes([time, ...times])\r\n    checkBestTime(time)\r\n  }\r\n\r\n  const renderTimer = () => {\r\n    if (gaming) {\r\n      return <Timer initialTime={new Date().getTime()} sendFinal={addTime} />\r\n    }\r\n    const mostRecentTime = times[0]\r\n    if (mostRecentTime !== undefined) {\r\n      const timerDisplayClasses = (mostRecentTime === bestTime) ? 'bold-larger green' : 'bold-larger red'\r\n      return <TimeDisplay time={mostRecentTime} classes={timerDisplayClasses} />\r\n    }\r\n    return undefined\r\n  }\r\n\r\n  return (\r\n    <TimerContext.Provider value={gaming}>\r\n      <BubbleTable requestGameEnd={endGame} requestGameStart={startGame} />\r\n      <div className=\"center-text\">\r\n        {renderTimer()}\r\n      </div>\r\n      <BottomNav attempts={attempts} bestTime={bestTime} />\r\n    </TimerContext.Provider>\r\n  )\r\n}\r\n\r\nexport default TimesManager\r\n","// eslint-disable-next-line\nimport * as React from 'react'\r\n\ninterface TitleProps {\n\n}\n\nconst Title: React.FunctionComponent<TitleProps> = () => (\n  <div className=\"title-container\">\n    <div className=\"title-top-row\">Pop It.</div>\n    <br />\n    <div className=\"title-bottom-row\">Now.</div>\n  </div>\n)\n\nexport default Title\n","// eslint-disable-next-line\nimport React from 'react'\r\nimport './App.css'\nimport TimesManager from './components/TimesManager'\nimport Title from './components/Title'\n\nconst App = () => (\n  <div>\n    <Title />\n    <TimesManager />\n  </div>\n)\n\nexport default App\n","// eslint-disable-next-line\nimport React from 'react'\r\nimport ReactDOM from 'react-dom'\nimport './index.css'\nimport App from './App'\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n)\n"],"sourceRoot":""}